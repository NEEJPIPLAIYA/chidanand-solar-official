document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){let e=document.getElementById("preloader");e&&e.classList.add("hide-preloader")},500)});const observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("show-el")})}),hiddenElements=document.querySelectorAll(".hidden-el");hiddenElements.forEach(e=>observer.observe(e));const container=document.getElementById("three-container");if(window.innerWidth>768&&container){let e=new THREE.Scene,t=new THREE.PerspectiveCamera(50,container.clientWidth/container.clientHeight,.1,1e3),n=new THREE.WebGLRenderer({alpha:!0,antialias:!0});function a(){let e=document.createElement("canvas");e.width=2048,e.height=512;let t=e.getContext("2d");return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,e.width,e.height),t.font='900 300px "Poppins", Arial',t.fillStyle="#f07e00",t.textAlign="center",t.textBaseline="middle",t.fillText("CHIDANAND",e.width/2,180),t.font='900 220px "Poppins", Arial',t.fillStyle="#FFFFFF",t.fillText("SOLAR",e.width/2,400),new THREE.CanvasTexture(e)}n.setSize(container.clientWidth,container.clientHeight),n.setPixelRatio(window.devicePixelRatio),n.shadowMap.enabled=!0,n.shadowMap.type=THREE.PCFSoftShadowMap,container.appendChild(n.domElement);let i=new THREE.AmbientLight(16777215,.7);e.add(i);let l=new THREE.DirectionalLight(16777215,1.5);l.position.set(5,10,7),l.castShadow=!0,e.add(l);let s=new THREE.Group,o=new THREE.BoxGeometry(3.5,.1,2),r=new THREE.MeshStandardMaterial({color:8947848,metalness:.9,roughness:.2}),c=new THREE.Mesh(o,r);c.castShadow=!0,s.add(c);let d=new THREE.BoxGeometry(3.4,.05,1.9),$=new THREE.MeshPhysicalMaterial({color:6707,metalness:.1,roughness:.1,clearcoat:1,clearcoatRoughness:.05}),y=new THREE.Mesh(d,$);y.position.y=.05,s.add(y);let m=new THREE.PlaneGeometry(3.4,1.9,6,10),u=new THREE.MeshBasicMaterial({color:16777215,wireframe:!0,transparent:!0,opacity:.08}),f=new THREE.Mesh(m,u);f.rotation.x=-Math.PI/2,f.position.y=.076,s.add(f);let p=a(),g=new THREE.PlaneGeometry(3,.75),h=new THREE.MeshBasicMaterial({map:p,transparent:!0}),b=new THREE.Mesh(g,h);b.rotation.x=-Math.PI/2,b.position.y=.08,b.position.z=-.3,s.add(b),e.add(s),t.position.set(0,3,4),t.lookAt(0,0,0);let x=0,B=0;function _(){requestAnimationFrame(_),s.position.y=.1*Math.sin(.001*Date.now()),s.rotation.y=.3*x,s.rotation.x=.3*B,n.render(e,t)}window.addEventListener("mousemove",e=>{x=e.clientX/window.innerWidth*2-1,B=-(2*(e.clientY/window.innerHeight))+1}),_(),window.addEventListener("resize",()=>{t.aspect=container.clientWidth/container.clientHeight,t.updateProjectionMatrix(),n.setSize(container.clientWidth,container.clientHeight)})}const solarData=[{max:2e3,size:2.18,cost:104640,subsidy:63240,net:41400,saveYr:25114,payback:1.6},{max:2500,size:2.73,cost:130800,subsidy:73050,net:57750,saveYr:31392,payback:1.8},{max:3e3,size:3.27,cost:150420,subsidy:78e3,net:72420,saveYr:37670,payback:1.9},{max:3500,size:3.82,cost:175490,subsidy:78e3,net:97490,saveYr:43949,payback:2.2},{max:4e3,size:4.36,cost:200560,subsidy:78e3,net:122560,saveYr:50227,payback:2.4},{max:4500,size:4.91,cost:215820,subsidy:78e3,net:137820,saveYr:56506,payback:2.4},{max:5e3,size:5.45,cost:239800,subsidy:78e3,net:161800,saveYr:62784,payback:2.6},{max:6e3,size:6,cost:263780,subsidy:78e3,net:185780,saveYr:69062,payback:2.7},{max:8e3,size:8.18,cost:335175,subsidy:78e3,net:257175,saveYr:94176,payback:2.7},{max:1e4,size:9.81,cost:392400,subsidy:78e3,net:314400,saveYr:113011,payback:2.8}];let currentTab="res";function openCalcModal(){document.getElementById("calcModal").style.display="flex",switchTab("res",document.querySelector(".tab.active")||document.querySelector(".tab")),calculateROI()}function closeCalcModal(){document.getElementById("calcModal").style.display="none"}function closeCalcOnBg(e){"calcModal"===e.target.id&&closeCalcModal()}function switchTab(e,t){currentTab=e,document.querySelectorAll(".tab").forEach(e=>e.classList.remove("active")),t&&t.classList.add("active");let n=document.getElementById("view-residential"),a=document.getElementById("view-business");"res"===e?(n.style.display="grid",a.style.display="none",document.getElementById("header-subtext").innerText="Calculate savings for your home"):(n.style.display="none",a.style.display="grid",updateBusinessContent(e))}function updateBusinessContent(e){let t=document.getElementById("comm-title-display"),n=document.getElementById("comm-icon-display"),a=document.getElementById("comm-benefits-list"),i=document.getElementById("header-subtext");"com"===e?(t.innerText="Commercial Solar",n.className="fa-solid fa-building-user",i.innerText="Maximize profits with Solar for Business",a.innerHTML=`
            <li><i class="fa-solid fa-check"></i> Accelerated Depreciation Benefit</li>
            <li><i class="fa-solid fa-check"></i> ROI in 3-4 Years</li>
            <li><i class="fa-solid fa-check"></i> Green Building Certification</li>
            <li><i class="fa-solid fa-check"></i> Reduce Fixed Operational Costs</li>
        `):(t.innerText="Industrial Solar",n.className="fa-solid fa-industry",i.innerText="Heavy-duty solutions for Factories",a.innerHTML=`
            <li><i class="fa-solid fa-check"></i> Stable Power & Peak Load Management</li>
            <li><i class="fa-solid fa-check"></i> High Efficiency Panel Technology</li>
            <li><i class="fa-solid fa-check"></i> Custom High-Rise Structures</li>
            <li><i class="fa-solid fa-check"></i> 27+ Year Performance Warranty</li>
        `)}function calculateROI(){let e=document.getElementById("billSlider"),t=parseInt(e.value);document.getElementById("displayBill").innerText=t;let n=solarData.find(e=>t<=e.max);n||(n=solarData[solarData.length-1]),document.getElementById("resSize").innerText=n.size,document.getElementById("resCost").innerText=n.cost.toLocaleString("en-IN"),document.getElementById("resSubsidy").innerText=n.subsidy.toLocaleString("en-IN"),document.getElementById("resNet").innerText=n.net.toLocaleString("en-IN"),document.getElementById("resPayback").innerText=n.payback,document.getElementById("resSavings").innerText=n.saveYr.toLocaleString("en-IN")}function sendWhatsAppQuote(){let e=document.getElementById("displayBill").innerText,t=document.getElementById("resSize").innerText,n=document.getElementById("resNet").innerText,a=document.getElementById("resSubsidy").innerText,i=document.getElementById("resPayback").innerText,l=`*Hello Chidanand Solar!* â˜€ï¸
`;l+=`I checked the estimator on your website.

`,l+=`ðŸ  *Project:* Residential
`,l+=`âš¡ *Bill:* â‚¹${e}
`,l+=`ðŸ”‹ *System:* ${t} kW
`,l+=`ðŸ’° *Est. Net Cost:* â‚¹${n}
`,l+=`âœ… *Subsidy:* â‚¹${a}
`,l+=`â±ï¸ *Payback:* ${i} Years

`,openWhatsApp(l+="I am interested. Please contact me.")}function sendBusinessWhatsApp(){let e=document.getElementById("comm_name").value,t=document.getElementById("comm_phone").value,n=document.getElementById("comm_bill").value,a=document.getElementById("comm_type").value;if(!e||!t||!n||!a){alert("Please fill in all fields to get a proper quote.");return}let i=`*Hello Chidanand Solar!* â˜€ï¸
`;i+=`I need a quote for a *${"com"===currentTab?"Commercial Office":"Industrial Factory"}* project.

`,i+=`ðŸ¢ *Company:* ${e}
`,i+=`ðŸ“ *Property Type:* ${a}
`,i+=`ðŸ“ž *Phone:* ${t}
`,i+=`âš¡ *Avg Bill:* â‚¹${n}

`,openWhatsApp(i+="Please arrange a technical consultation.")}function openWhatsApp(e){window.open(`https://wa.me/917600198889?text=${encodeURIComponent(e)}`,""),closeCalcModal()}const imgModal=document.getElementById("imgModal");function openCalcModal(){calcModal&&(calcModal.style.display="flex")}function closeCalcModal(){calcModal&&(calcModal.style.display="none")}function openImgModal(e,t){if(imgModal){imgModal.style.display="flex";let n=document.getElementById("modalImageDisplay"),a=document.getElementById("imgCaption");n&&(n.src=e),a&&(a.innerText=t)}}window.onclick=e=>{calcModal&&e.target==calcModal&&closeCalcModal(),imgModal&&e.target==imgModal&&(imgModal.style.display="none")};const hamburger=document.querySelector(".hamburger");hamburger&&hamburger.addEventListener("click",()=>{document.querySelector(".navbar").classList.toggle("active")}),document.querySelectorAll(".navbar a").forEach(e=>{e.addEventListener("click",()=>document.querySelector(".navbar").classList.remove("active"))});const counters=document.querySelectorAll(".counter");let counted=!1;if(window.addEventListener("scroll",()=>{let e=document.getElementById("why-us");e&&window.scrollY+window.innerHeight>e.offsetTop&&!counted&&(counters.forEach(e=>{let t=+e.getAttribute("data-target"),n=0,a=()=>{(n+=t/100)<t?(e.innerText=Math.ceil(n),setTimeout(a,30)):e.innerText=t};a()}),counted=!0)}),document.querySelector(".partnerSwiper"))var swiper=new Swiper(".partnerSwiper",{slidesPerView:2,spaceBetween:30,loop:!0,speed:2500,allowTouchMove:!1,autoplay:{delay:0,disableOnInteraction:!1,pauseOnMouseEnter:!1},breakpoints:{480:{slidesPerView:3,spaceBetween:30},768:{slidesPerView:4,spaceBetween:40},1024:{slidesPerView:6,spaceBetween:50}}});const allDetails=document.querySelectorAll(".faq-card");allDetails.forEach(e=>{e.addEventListener("click",()=>{allDetails.forEach(t=>{t!==e&&t.removeAttribute("open")})})});const contactForm=document.getElementById("contactForm"),formBtn=document.getElementById("formBtn"),formStatus=document.getElementById("formStatus"),scriptURL="https://script.google.com/macros/s/AKfycbx7LYQe9I1sqLw0BZ1M15PM1yv9Y-PO6ZF9r5B9t5-n-HXPPJVqPLg3cuHQMliHDgr-/exec";contactForm&&contactForm.addEventListener("submit",function(e){e.preventDefault();let t=formBtn.innerText;formBtn.innerText="Sending...",formBtn.disabled=!0,formBtn.style.opacity="0.7";let n=new FormData(contactForm);fetch("https://script.google.com/macros/s/AKfycbx7LYQe9I1sqLw0BZ1M15PM1yv9Y-PO6ZF9r5B9t5-n-HXPPJVqPLg3cuHQMliHDgr-/exec",{method:"POST",body:n}).then(e=>{formStatus.style.display="block",formStatus.style.color="#2ecc71",formStatus.innerText="Thank you! We have received your message and will call you shortly.",contactForm.reset()}).catch(e=>{console.error("Error!",e.message),formStatus.style.display="block",formStatus.style.color="red",formStatus.innerText="Something went wrong. Please call us directly."}).finally(()=>{formBtn.innerText=t,formBtn.disabled=!1,formBtn.style.opacity="1",setTimeout(()=>{formStatus.style.display="none"},6e3)})});